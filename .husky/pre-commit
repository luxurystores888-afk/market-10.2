#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "Running pre-commit security checks..."

# Semgrep (optional if installed)
if command -v semgrep >/dev/null 2>&1; then
  semgrep --error --config p/ci || exit 1
else
  echo "Semgrep not found, skipping."
fi

# Gitleaks
if command -v gitleaks >/dev/null 2>&1; then
  gitleaks detect --no-git --redact || exit 1
else
  echo "Gitleaks not found, skipping."
fi

echo "Pre-commit checks complete."

